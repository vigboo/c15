(()=>{let e={unknown:{en:"Unknown Error",zh:"未知错误"},auth:{en:"Sign In",zh:"身份认证"},login:{en:"Sign In",zh:"登 录"},logout:{en:"Sign out",zh:"退出登录"},"login-ing":{en:"Signing In",zh:"正在登录"},"uname-label":{en:"Username",zh:"用户名"},"pword-label":{en:"Password",zh:"密码"},"uname-placeholder":{en:"Input username",zh:"请输入用户名"},"pword-placeholder":{en:"Input password",zh:"请输入密码"},success:{en:"Entering",zh:"正在进入"},empty:{en:"Username or password is empty",zh:"用户名或密码为空"},"connection-failed":{en:"Connection failed",zh:"服务器连接失败"},ratelimit:{en:"Too many errors, try again in 2 minute",zh:"错误次数过多，等 2 分钟再试"},"bad-password":{en:"Incorrect password",zh:"用户名或密码错误"},"invalid username or password":{en:"Incorrect password",zh:"用户名或密码错误"},"login denied":{en:"Current account has no application access permission, please contact the administrator",zh:"当前账号无应用访问权限，请联系管理员"},"user num exceeded":{en:"User num exceeded",zh:"用户数量超出限制"},"sign-in-with":{en:"Sign in with following",zh:"其他登录方式"},"wechat-title":{en:"Wechat",zh:"微信登录"},"workweixin-title":{en:"WorkWeixin",zh:"企业微信登录"},"dingtalk-title":{en:"Dingtalk",zh:"钉钉登录"},"usergroup-title":{en:"Password",zh:"密码登录"},"github-title":{en:"Github",zh:"Github 登录"},"cas-title":{en:"CAS",zh:"CAS 登录"},"oidc-title":{en:"OIDC",zh:"OIDC 登录"},"qy_weixin-title":{en:"WeCom",zh:"企业微信登录"},"dingtalk-title":{en:"Dingtalk",zh:"钉钉登录"},"ldap-title":{en:"LDAP",zh:"LDAP 登录"},"need-review":{en:"Account not authorized. Please contact the administrator.",zh:"当前账号未获得应用授权，请联系管理员处理"},forbidden:{en:"This user has been denied",zh:"当前用户被管理员拒绝访问"},loading:{en:"Loading",zh:"正在加载"},"not-support-wechat":{en:"This app does not support sign in with Wechat",zh:"当前应用不支持微信登录"},"not-support-dingtalk":{en:"This app does not support sign in with Dingtalk",zh:"当前应用不支持钉钉登录"},"not-support-workweixin":{en:"This app does not support sign in with WorkWeixin",zh:"当前应用不支持企业微信登录"},"not-support-github":{en:"This app does not support sign in with Github",zh:"当前应用不支持 Github 登录"},"get user info failed":{en:"Get user info failed",zh:"获取用户信息失败"},"signin-in-new":{en:"Click here to sign in",zh:"点击这里登录"},"user number exceeded":{en:"No current user, please contact the administrator",zh:"无当前用户，请联系管理员"},"bind-totp":{en:"Bind Totp",zh:"绑定动态口令"},"download-totp":{en:"Download",zh:"下载"},"bind-tencent":{en:"Tencent Authenticator",zh:"腾讯身份验证器"},"bind-google":{en:"Google Authenticator",zh:"谷歌身份验证器"},"bind-google-url":{en:"https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2&hl=zh&pli=1",zh:"https://baike.baidu.com/item/Google%20Authenticator/58350750"},"bind-microsoft":{en:"Microsoft Authenticator",zh:"微软身份验证器"},"bind-freeotp":{en:"FreeOTP",zh:"FreeOTP"},use:{en:"Use",zh:"使用"},"support totp software":{en:"The TOTP software",zh:"支持 TOTP 的认证软件"},"scan qrcode":{en:"Scan the QR code below.",zh:"扫描以下二维码"},"go enter totp":{en:"Bound",zh:"完成绑定"},"copy qrcode url":{en:"COPY KEY",zh:"复制秘钥"},"copy-success":{en:"Copied!",zh:"已复制"},"copy-failed":{en:"Copy Failed",zh:"复制失败"},"totp-login":{en:"TOTP Login",zh:"动态口令登录"},"totp Verification failed":{en:"Verification failed, please try again",zh:"验证失败，请重试"},"otp timestamp gap is more than 30 seconds":{en:"Current time and server time gap exceeds 30 seconds",zh:"服务端时间和客户端时间戳间隔大于 30 秒"}};function t(t){let n="en";for(language in e.unknown)navigator.language.startsWith(language)&&(n=language);let i=e[t];return void 0===i?`${e.unknown[n]}: ${t}`:i[n]}let n=`
<div class="slg-spin">
    <div class="slg-spin-dot">.</div>
    <div class="slg-spin-dot">.</div>
    <div class="slg-spin-dot">.</div>
</div>`,i=`
<div id="slg-warning-box">
    <div id="slg-warning-text"></text>
<div>
`,s=[{label:t("bind-tencent"),url:"https://sj.qq.com/appdetail/com.tencent.authenticator"},{label:t("bind-google"),url:t("bind-google-url")},{label:t("bind-microsoft"),url:"https://www.microsoft.com/zh-cn/security/mobile-authenticator-app"},{label:t("bind-freeotp"),url:"https://github.com/freeotp"}].map(e=>`<div>
        <span>${e.label}</span>
        <a href="${e.url}" target="_blank">${t("download-totp")}</a>
    </div>`).join(""),o=`
<div id="slg-box-title" class="slg-center"></div>
<div id="slg-panel" class="slg-center">
    <div id="slg-usergroup-container">
        <div class="slg-usergroup-input-container">
            <div class="slg-usergroup-input-icon">
                <svg viewBox="0 0 1024 1024">
                    <path d="M407.61 578.87c-174.46 0-304.73 113.04-304.73 277.2v17.69c0 85.81 139.6 85.81 316.37 85.81h187.73c169.75 0 316.37 0 316.37-85.81v-17.69c0-164.16-130.28-277.2-304.73-277.2H407.61zM503.71 535.67c138.19 0 250.63-105.81 250.63-235.94 0-130.06-112.44-235.86-250.63-235.86-138.11 0-250.56 105.81-250.56 235.86 0 130.13 112.45 235.94 250.56 235.94z"></path>
                </svg>
            </div>
            <input id="slg-usergroup-username" type="text" autocomplete="off" placeholder="${t("uname-placeholder")}" class="slg-usergroup-input" />
        </div>
        <div class="slg-usergroup-input-container">
            <div class="slg-usergroup-input-icon">
                <svg viewBox="0 0 1024 1024">
                    <path d="M845.552 430.624h-71.848V262.816C773.704 122.288 659.968 8 520.04 8 380.096 8 266.24 122.288 266.24 262.832v167.8h-71.784c-34.616 0-62.672 28.16-62.672 62.928v459.44c0 34.824 28.064 63.008 62.672 63.008h651.16c34.616 0 62.6-28.184 62.6-63.008v-459.44c0-34.776-28.048-62.936-62.664-62.936zM555.216 735.248v100.32a8.28 8.28 0 0 1-8.208 8.264h-53.88a8.32 8.32 0 0 1-8.272-8.256V735.248c-25.312-13-42.84-39.056-42.84-69.592 0-43.208 34.928-78.36 77.968-78.36 43.096 0 78.04 35.144 78.04 78.344 0.048 30.552-17.48 56.608-42.808 69.608z m121.128-304.624h-312.64V266.976c0-86.56 70.208-157.056 156.392-157.056s156.256 70.496 156.256 157.056v163.648h-0.008z m0 0"></path>
                </svg>
            </div>
            <input id="slg-usergroup-password" type="password" autocomplete="off" placeholder="${t("pword-placeholder")}" class="slg-usergroup-input" />
        </div>
        <button id="slg-usergroup-btn" class="slg-usergroup-btn">${t("login")}</button>
    </div>
    <div id="slg-ldap-container">
        <div class="slg-usergroup-input-container">
            <div class="slg-usergroup-input-icon">
                <svg viewBox="0 0 1024 1024">
                    <path d="M407.61 578.87c-174.46 0-304.73 113.04-304.73 277.2v17.69c0 85.81 139.6 85.81 316.37 85.81h187.73c169.75 0 316.37 0 316.37-85.81v-17.69c0-164.16-130.28-277.2-304.73-277.2H407.61zM503.71 535.67c138.19 0 250.63-105.81 250.63-235.94 0-130.06-112.44-235.86-250.63-235.86-138.11 0-250.56 105.81-250.56 235.86 0 130.13 112.45 235.94 250.56 235.94z"></path>
                </svg>
            </div>
            <input id="slg-ldap-username" type="text" autocomplete="off" placeholder="${t("uname-placeholder")}" class="slg-usergroup-input" />
        </div>
        <div class="slg-usergroup-input-container">
            <div class="slg-usergroup-input-icon">
                <svg viewBox="0 0 1024 1024">
                    <path d="M845.552 430.624h-71.848V262.816C773.704 122.288 659.968 8 520.04 8 380.096 8 266.24 122.288 266.24 262.832v167.8h-71.784c-34.616 0-62.672 28.16-62.672 62.928v459.44c0 34.824 28.064 63.008 62.672 63.008h651.16c34.616 0 62.6-28.184 62.6-63.008v-459.44c0-34.776-28.048-62.936-62.664-62.936zM555.216 735.248v100.32a8.28 8.28 0 0 1-8.208 8.264h-53.88a8.32 8.32 0 0 1-8.272-8.256V735.248c-25.312-13-42.84-39.056-42.84-69.592 0-43.208 34.928-78.36 77.968-78.36 43.096 0 78.04 35.144 78.04 78.344 0.048 30.552-17.48 56.608-42.808 69.608z m121.128-304.624h-312.64V266.976c0-86.56 70.208-157.056 156.392-157.056s156.256 70.496 156.256 157.056v163.648h-0.008z m0 0"></path>
                </svg>
            </div>
            <input id="slg-ldap-password" type="password" autocomplete="off" placeholder="${t("pword-placeholder")}" class="slg-usergroup-input" />
        </div>
        <button id="slg-ldap-btn" class="slg-usergroup-btn">${t("login")}</button>
    </div>
    <div id="slg-wechat-container" class="slg-hcenter">
        <div id="slg-wechat-inject"></div>
    </div>
    <div id="slg-wechat-link-container" class="slg-hcenter slg-vcenter">
        <a class="slg-link" id="slg-wechat-link">${t("signin-in-new")}</a>
    </div>
    <div id="slg-github-container" class="slg-hcenter slg-vcenter">
        <a class="slg-link" id="slg-github-link">${t("signin-in-new")}</a>
    </div>
    <div id="slg-cas-container" class="slg-hcenter slg-vcenter">
        <a class="slg-link" id="slg-cas-link">${t("signin-in-new")}</a>
    </div>
    <div id="slg-oidc-container" class="slg-hcenter slg-vcenter">
        <a class="slg-link" id="slg-oidc-link">${t("signin-in-new")}</a>
    </div>
    <div id="slg-qy_weixin-container" class="slg-hcenter slg-vcenter">
        <a class="slg-link" id="slg-qy_weixin-link">${t("signin-in-new")}</a>
    </div>
    <div id="slg-dingtalk-container" class="slg-hcenter slg-vcenter">
        <a class="slg-link" id="slg-dingtalk-link">${t("signin-in-new")}</a>
    </div>
    <div id="slg-totp_qrcode-container" class="slg-totp_qrcode-container slg-hidden">
        <div  class="slg-totp_desc_title">${t("use")} 
            <span class="slg-totp_desc_title-strong">
                ${t("support totp software")}
                <div class="slg-totp_download-container">
                    ${s}
                </div>
            </span> ${t("scan qrcode")}
        </div>
       <img id="slg-totp_qrcode-img" class="slg-totp_qrcode-img" alt="totp_img"/>
       <div id="slg-totp_qrcode-copy" class="slg-totp_qrcode-copy">${t("copy qrcode url")}</div>
       <div id="slg-totp_next-step" class="slg-totp_next-step">${t("go enter totp")}</div>
    </div>
    <div id="slg-totp_code-container" class="slg-totp_code-container slg-hidden">
        <div class="verification-code" id="verificationCode">
            <input type="text" maxlength="1" data-index="0">
            <input type="text" maxlength="1" data-index="1">
            <input type="text" maxlength="1" data-index="2">
            <input type="text" maxlength="1" data-index="3">
            <input type="text" maxlength="1" data-index="4">
            <input type="text" maxlength="1" data-index="5">
        </div>
        <button id="slg-totp-btn" class="slg-usergroup-btn">${t("login")}</button>
    </div>
    <div id="slg-msg-container" class="slg-vcenter slg-hcenter">
        <div id="slg-msg-text"></div>
    </div>
    <div id="slg-loading-container" class="slg-vcenter slg-hcenter">
        <div id="slg-loading-text">${t("loading")}</div>
        ${n}
    </div>
    <div id="slg-forbidden-container" class="slg-vcenter slg-hcenter">
        <div id="slg-forbidden-text">${t("forbidden")}</div>
        <button id="slg-forbidden-btn">${t("logout")}</button>
    </div>
</div>
<div id="slg-with-more" class="slg-center slg-hidden">
    <div id="slg-with-more-title">
        <div></div>
        <div>${t("sign-in-with")}</div>
    </div>
    <div id="slg-tabs" class="slg-hcenter">
        <div id="slg-with-usergroup" class="slg-vcenter slg-hcenter slg-hidden">
            <svg viewBox="0 0 1024 1024">
                <path d="M845.552 430.624h-71.848V262.816C773.704 122.288 659.968 8 520.04 8 380.096 8 266.24 122.288 266.24 262.832v167.8h-71.784c-34.616 0-62.672 28.16-62.672 62.928v459.44c0 34.824 28.064 63.008 62.672 63.008h651.16c34.616 0 62.6-28.184 62.6-63.008v-459.44c0-34.776-28.048-62.936-62.664-62.936zM555.216 735.248v100.32a8.28 8.28 0 0 1-8.208 8.264h-53.88a8.32 8.32 0 0 1-8.272-8.256V735.248c-25.312-13-42.84-39.056-42.84-69.592 0-43.208 34.928-78.36 77.968-78.36 43.096 0 78.04 35.144 78.04 78.344 0.048 30.552-17.48 56.608-42.808 69.608z m121.128-304.624h-312.64V266.976c0-86.56 70.208-157.056 156.392-157.056s156.256 70.496 156.256 157.056v163.648h-0.008z m0 0"></path>
            </svg>
        </div>
        <div id="slg-with-wechat" class="slg-vcenter slg-hcenter slg-hidden">
            <svg viewBox="0 0 1024 1024">
                <path d="M690.1 377.4c5.9 0 11.8 0.2 17.6 0.5-24.4-128.7-158.3-227.1-319.9-227.1C209 150.8 64 271.4 64 420.2c0 81.1 43.6 154.2 111.9 203.6 5.5 3.9 9.1 10.3 9.1 17.6 0 2.4-0.5 4.6-1.1 6.9-5.5 20.3-14.2 52.8-14.6 54.3-0.7 2.6-1.7 5.2-1.7 7.9 0 5.9 4.8 10.8 10.8 10.8 2.3 0 4.2-0.9 6.2-2l70.9-40.9c5.3-3.1 11-5 17.2-5 3.2 0 6.4 0.5 9.5 1.4 33.1 9.5 68.8 14.8 105.7 14.8 6 0 11.9-0.1 17.8-0.4-7.1-21-10.9-43.1-10.9-66 0-135.8 132.2-245.8 295.3-245.8z m-194.3-86.5c23.8 0 43.2 19.3 43.2 43.1s-19.3 43.1-43.2 43.1c-23.8 0-43.2-19.3-43.2-43.1s19.4-43.1 43.2-43.1z m-215.9 86.2c-23.8 0-43.2-19.3-43.2-43.1s19.3-43.1 43.2-43.1 43.2 19.3 43.2 43.1-19.4 43.1-43.2 43.1z" p-id="1373"></path><path d="M866.7 792.7c56.9-41.2 93.2-102 93.2-169.7 0-124-120.8-224.5-269.9-224.5-149 0-269.9 100.5-269.9 224.5S540.9 847.5 690 847.5c30.8 0 60.6-4.4 88.1-12.3 2.6-0.8 5.2-1.2 7.9-1.2 5.2 0 9.9 1.6 14.3 4.1l59.1 34c1.7 1 3.3 1.7 5.2 1.7 2.4 0 4.7-0.9 6.4-2.6 1.7-1.7 2.6-4 2.6-6.4 0-2.2-0.9-4.4-1.4-6.6-0.3-1.2-7.6-28.3-12.2-45.3-0.5-1.9-0.9-3.8-0.9-5.7 0.1-5.9 3.1-11.2 7.6-14.5zM600.2 587.2c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c0 19.8-16.2 35.9-36 35.9z m179.9 0c-19.9 0-36-16.1-36-35.9 0-19.8 16.1-35.9 36-35.9s36 16.1 36 35.9c-0.1 19.8-16.2 35.9-36 35.9z"></path>
            </svg>
        </div>
        <div id="slg-with-dingtalk" class="slg-vcenter slg-hcenter slg-hidden">
            <svg viewBox="0 0 1024 1024">
                <path d="M827.2 408c-1.6 6.4-9.6 25.6-9.6 25.6-28.8 60.8-102.4 174.4-102.4 174.4v8l-20.8 46.4h104L600 928l44.8-177.6h-81.6l28.8-132.8c-22.4 4.8-49.6 6.4-81.6 16 0 0-43.2 22.4-124.8-52.8 0 0-54.4-49.6-22.4-62.4 12.8-4.8 65.6-12.8 107.2-17.6 56-8 89.6-11.2 89.6-11.2s-171.2 1.6-212.8-4.8c-40-6.4-92.8-75.2-104-134.4 0 0-11.2-32 36.8-17.6 52.8 16 275.2 60.8 275.2 60.8s-288-88-307.2-110.4c-19.2-20.8-56-118.4-51.2-177.6 0 0 1.6-14.4 17.6-11.2 0 0 212.8 102.4 358.4 156.8 144 56 270.4 88 254.4 156.8z"></path>
            </svg>
        </div>
        <div id="slg-with-workweixin" class="slg-vcenter slg-hcenter slg-hidden">
            <svg viewBox="0 0 1024 1024">
                <path d="M700.8256 701.2864c26.88 26.9312 59.392 43.1104 95.4368 53.248l12.1344 3.1232c25.2928 4.608 38.5536 27.648 39.68 51.2 0 27.648-20.1216 51.2-47.7696 55.2448-26.4192 3.4304-54.0672-13.2608-59.8016-39.7312-8.0384-40.8064-25.344-76.4928-55.2448-106.3936-3.4304-3.4816-1.1264-10.9568-2.304-16.6912l13.4656-1.024c2.048 0 3.584 0.256 4.4032 1.024z m48.896-521.216c56.32 59.8016 87.4496 130.56 88.576 212.8384a109.2096 109.2096 0 0 0-45.4656-9.728h-2.304a109.2096 109.2096 0 0 0-104.0896 96.6144 120.2688 120.2688 0 0 0 0 28.7744c-20.1728 20.1216-44.9024 32.768-75.3664 37.9392h-0.6144a105.1648 105.1648 0 0 0-44.288 184.6784 416.3584 416.3584 0 0 1-106.4448 17.8688 481.3824 481.3824 0 0 1-137.472-13.2608 50.0224 50.0224 0 0 0-22.4256 2.304l-104.1408 51.2c-13.2608 6.912-25.344 8.0384-36.864-1.1264-10.9056-8.0896-12.032-20.1728-10.9056-34.56 4.608-28.7232 8.0896-57.4976 10.9568-86.272a31.1296 31.1296 0 0 0-8.0896-18.944c-45.4144-45.5168-84.5312-95.5392-104.0896-158.8224-36.864-125.44-3.4816-232.96 87.4496-322.7648C300.3904 3.9936 590.848 11.4688 749.7216 180.0704z m207.104 414.7712c28.7744 3.4816 50.0224 26.4704 50.0224 55.2448 0 27.648-16.6912 50.0224-44.288 55.2448-33.792 6.144-64.3072 20.48-89.7024 42.496l-9.216 8.704c-5.7856 5.7344-14.3872 10.9056-20.1728 2.304-2.304-4.608-1.1264-15.5648 2.304-18.9952a186.0096 186.0096 0 0 0 51.2-100.7104 54.784 54.784 0 0 1 59.8528-44.288z m-215.1936-51.7632c-1.1264 5.7344 1.1776 14.336-2.304 17.8176-28.7232 28.7744-44.288 63.2832-52.3264 103.0144-5.7856 28.7232-32.256 45.4144-59.8528 40.8064-27.648-4.608-48.3328-28.7744-48.3328-55.808 0-24.1664 17.8688-46.592 41.984-51.2a190.4128 190.4128 0 0 0 103.0144-52.3264c3.4304-3.4816 12.0832-2.304 17.8176-2.304z m51.2-108.1856c25.344 0 48.896 16.6912 54.1184 43.1616 6.8608 39.68 24.1664 74.24 52.3264 102.9632 3.4816 3.4816 1.1776 13.2608 2.304 18.9952-6.912 0-15.5136 2.304-18.944-1.1264-28.8256-29.952-64.512-45.4656-104.192-54.0672a53.6576 53.6576 0 0 1-40.8064-58.7264c3.9936-28.7232 26.4704-50.0224 55.1936-51.2z"></path>
            </svg>
        </div>
        <div id="slg-with-github" class="slg-vcenter slg-hcenter slg-hidden">
            <svg viewBox="0 0 1024 1024">
                <path d="M511.6 76.3C264.3 76.2 64 276.4 64 523.5 64 718.9 189.3 885 363.8 946c23.5 5.9 19.9-10.8 19.9-22.2v-77.5c-135.7 15.9-141.2-73.9-150.3-88.9C215 726 171.5 718 184.5 703c30.9-15.9 62.4 4 98.9 57.9 26.4 39.1 77.9 32.5 104 26 5.7-23.5 17.9-44.5 34.7-60.8-140.6-25.2-199.2-111-199.2-213 0-49.5 16.3-95 48.3-131.7-20.4-60.5 1.9-112.3 4.9-120 58.1-5.2 118.5 41.6 123.2 45.3 33-8.9 70.7-13.6 112.9-13.6 42.4 0 80.2 4.9 113.5 13.9 11.3-8.6 67.3-48.8 121.3-43.9 2.9 7.7 24.7 58.3 5.5 118 32.4 36.8 48.9 82.7 48.9 132.3 0 102.2-59 188.1-200 212.9 23.5 23.2 38.1 55.4 38.1 91v112.5c0.8 9 0 17.9 15 17.9 177.1-59.7 304.6-227 304.6-424.1 0-247.2-200.4-447.3-447.5-447.3z"></path>
            </svg>
        </div>
        <div id="slg-with-cas" class="slg-vcenter slg-hcenter slg-hidden">
            <svg t="1744083532734" class="icon" viewBox="0 0 2120 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18086" width="200" height="200"><path d="M1808.39492929 394.873289c-112.783236-72.051069-67.60835999-176.344772 40.46824401-177.97229899 43.59133699-0.65980799 164.072337 22.389496 209.55512399 49.61758599l75.262137-209.68708598s-193.63174999-42.18374601-318.77539601-31.53883802c-101.038648 8.62149499-182.898868 38.97267801-242.85345098 96.15606699-61.230213 58.41503001-88.98614999 134.38096201-82.47604102 225.74242201a244.43699099 244.43699099 0 0 0 15.35154001 69.851708c8.40155901 22.12557301 20.322096 43.679311 35.36572701 64.089382 14.999643 20.322096 29.07555399 35.893573 43.019503 47.638161 12.80028199 10.77686899 35.453701 26.83220499 69.45582298 49.265689l105.96521701 69.147912c61.977995 39.63248701 92.81303801 99.499096 30.13124699 158.749883-48.561893 45.878672-193.54377601 19.44235201-291.10743398-5.366441l35.93756 223.367112c63.517548 0.263923 138.075889-0.175949 182.546971-3.07910599 109.88008-7.16991703 204.408619-26.172397 272.016979-79.70484501 137.680004-109.000335 103.985792-281.430245 35.89357299-374.59518-58.67895399-80.232692-103.01807301-99.58706999-215.80131-171.68212701zM520.22914129 1022.746892l105.70129402-203.968747c-236.38732899 58.546992-419.198223-128.222751-365.79773603-329.596252 107.81268-406.661865 519.093203-265.94674199 524.06376002-263.35149702L865.70478129 17.28697799S438.5448713-57.05142699 245.5289423 102.710163C52.51301328 262.427765-0.7555127 449.593393 16.8393763 641.20173101c11.304716 123.07624599 61.494136 221.299712 149.248643 292.031165 88.590265 71.391261 199.52603799 88.854188 331.31175399 89.47000899l22.829368 0z" p-id="18087"></path><path d="M1031.40464529 831.09456699c69.675759-106.22914 152.591672-190.420683 286.664724-184.26247198 99.059223 4.574671 210.038984 67.080513 283.98150301 140.18727599l0-3.079106c-121.71264201-127.343007-244.43699099-182.98684201-393.37772401-182.986842-156.41856001 0-298.54127401 72.75486501-404.15459301 191.344414 134.556911-32.990416 202.033309 14.29584701 226.88609001 38.79672999z" p-id="18088"></path><path d="M802.80305429 813.939551c-13.592052 3.34302901-27.62397501-2.551259-34.83787999-14.471796a31.820356 31.820356 0 0 1 3.51897799-37.56508801c74.38239199-83.487747 163.720439-142.474611 260.404352-173.793513l119.46929401-253.63032 28.98757901 228.073744c4.75062-0.13196201 9.50124-0.395885 14.29584798-0.395885 79.26497401 0 151.88787701 15.571476 220.46395501 47.770123L1325.6791583 29.471439l-264.891049 0L552.2518393 1010.606419l280.59448699 0 95.05638601-201.769386c-30.61510599-6.862007-71.523223-8.04966199-125.099658 5.102518z" p-id="18089"></path><path d="M1301.2662503 671.025067c-38.180908-1.803476-72.44695401 4.134799-104.73357502 18.95849301l40.732167 320.57887199 239.55441001 0-46.71443001-303.159932c-44.11918299-21.50975099-88.81020101-34.573956-128.83857199-36.42142z" p-id="18090"></path></svg>
        </div>
        <div id="slg-with-oidc" class="slg-vcenter slg-hcenter slg-hidden">
            <svg t="1744712874998" class="icon" viewBox="0 0 1105 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18861" width="200" height="200"><path d="M507.2896 133.44768l130.98496-71.4496v820.9408l-130.97984 69.71392V133.44768z" fill="#F38019" p-id="18862"></path><path d="M479.39072 323.968a724.30592 724.30592 0 0 0-77.056 16.6144C118.35904 417.01376 37.77536 603.8016 67.95776 701.696c30.11584 97.8944 161.03424 263.2192 439.2704 250.19904 0.13824-27.41248 0.13824-57.73824 0-90.89536-200.49408-26.37824-302.67904-88.82688-306.55488-187.40736-5.74464-147.74272 134.1696-216.90368 217.87136-229.0176 16.82432-2.49344 37.66272-5.67808 61.19936-8.6528l-0.27648-111.9488h-0.07168z m185.12384 107.65312c52.1984 5.6832 103.57248 18.69312 147.0464 44.44672-10.65984 5.19168-34.26816 19.73248-70.82496 43.47904l290.49344 66.39104-16.54272-206.58176-78.37184 44.30336c-116.10112-57.8048-205.19936-91.0336-267.29984-99.6864l-4.50048 107.648z" fill="#ADAFB3" p-id="18863"></path></svg>
        </div>
        <div id="slg-with-qy_weixin" class="slg-vcenter slg-hcenter slg-hidden">
            <svg t="1745380376619" class="icon" viewBox="0 0 1219 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18461" width="26" height="26" data-spm-anchor-id="a313x.manage_type_myprojects.0.i3.2cd73a81ZUggjm"><path d="M966.168 275.578a429.202 429.202 0 0 0-77.41-110.397c-80.822-83.944-193.95-138.02-318.61-152.26a583.655 583.655 0 0 0-65.926-3.827c-20.284 0-41.545 1.195-63.097 3.584C316.05 26.258 202.265 80.19 120.856 164.06a429.641 429.641 0 0 0-77.824 110.227A385.829 385.829 0 0 0 3.048 445.074c0 76.313 23.113 151.382 66.803 217.356 22.138 33.427 58.344 75.484 91.673 105.204l-15.068 118.833c-0.585 1.585-1.194 3.17-1.584 4.9-0.415 1.61-0.488 3.195-0.634 4.804-0.098 1.194-0.415 2.389-0.415 3.584 0 1.316 0.317 2.608 0.415 3.9a38.522 38.522 0 0 0 38.205 34.865c6.973 0 13.41-2.023 19.017-5.217l0.585-0.39c0.78-0.39 1.658-0.878 2.438-1.39l35.962-18.14 107.081-54.052a550.687 550.687 0 0 0 93.574 18.09 576.123 576.123 0 0 0 128.975-0.39 559.47 559.47 0 0 0 126.343-29.622 69.973 69.973 0 0 1-47.446-73.192 468.114 468.114 0 0 1-89.575 19.261 482.987 482.987 0 0 1-108.106 0.317c-3.584-0.39-7.265-0.975-10.922-1.463a475.404 475.404 0 0 1-70.851-14.994 48.299 48.299 0 0 0-14.726-2.268c-7.973 0-15.604 2.073-23.406 6.096-1.048 0.61-2 1.048-3.048 1.609l-87.942 52.053-3.852 2.292c-1.877 1.195-2.999 1.585-3.998 1.585a5.973 5.973 0 0 1-5.803-6.071l3.389-13.775 3.803-14.97 6.461-24.527 7.07-27.405c4.877-15.189-0.487-31.792-13.287-41.252a394.679 394.679 0 0 1-36.742-31.037 362.57 362.57 0 0 1-52.15-61.928c-34.622-52.224-52.859-111.494-52.859-171.447 0-46.494 10.582-91.745 31.452-134.436a344.795 344.795 0 0 1 62.488-88.26c66.877-69.022 160.987-113.322 264.948-124.635 18.042-1.999 35.84-2.974 52.858-2.974 17.92 0 36.474 1.073 55.247 3.17 103.521 11.824 197.071 56.32 263.436 125.342a344.21 344.21 0 0 1 62.098 88.478c20.359 41.448 30.964 87.04 31.037 133.267 0 4.803-0.317 9.606-0.536 14.384a69.34 69.34 0 0 1 85.577 9.997c1.22 1.194 2.121 2.51 3.17 3.754a360.28 360.28 0 0 0 1.219-29.574 385.829 385.829 0 0 0-39.254-169.326" fill="#0082F0" p-id="18462"></path><path d="M961.39 884.59a67.462 67.462 0 0 0-8.339-1.39 213.87 213.87 0 0 1-119.32-66.706 16.579 16.579 0 0 0-28.062 9.533 16.725 16.725 0 0 0 6.826 16.042l4.755 4.779a215.503 215.503 0 0 1 58.806 110.25 69.778 69.778 0 0 0 51.737 63.318 69.51 69.51 0 0 0 67.096-18.164 70.217 70.217 0 0 0 17.725-68.778 69.925 69.925 0 0 0-51.322-48.957" fill="#FB6500" p-id="18463"></path><path d="M1192.058 705.853a69.486 69.486 0 0 0-72.607-16.506 69.851 69.851 0 0 0-46.03 58.685 215.381 215.381 0 0 1-66.366 119.71 16.823 16.823 0 0 0 9.265 28.892 16.701 16.701 0 0 0 16.213-7.558l4.706-4.803a213.821 213.821 0 0 1 109.787-59.1 69.949 69.949 0 0 0 63.098-52.004 70.217 70.217 0 0 0-18.066-67.414" fill="#0082F0" p-id="18464"></path><path d="M896.902 507.928a70.217 70.217 0 0 0-16.36 72.802 69.876 69.876 0 0 0 58.32 46.3 213.821 213.821 0 0 1 119.271 66.681 16.677 16.677 0 0 0 28.477-9.484 16.798 16.798 0 0 0-7.216-16.189 215.479 215.479 0 0 1-63.684-115.03 69.778 69.778 0 0 0-51.638-63.317 69.51 69.51 0 0 0-67.17 18.14" fill="#2DBC00" p-id="18465"></path><path d="M817.81 766.464l0.585-4.242a215.576 215.576 0 0 1 66.414-119.833 16.823 16.823 0 0 0-9.24-28.891 16.701 16.701 0 0 0-16.238 7.558 213.797 213.797 0 0 1-114.493 63.927 69.949 69.949 0 0 0-63.098 52.004 70.217 70.217 0 0 0 18.066 67.414 69.486 69.486 0 0 0 70.486 17.066 69.827 69.827 0 0 0 47.445-55.003" fill="#FFCC00" p-id="18466"></path></svg>
        </div>
        <div id="slg-with-dingtalk" class="slg-vcenter slg-hcenter slg-hidden">
            <svg t="1744712819889" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18551" width="200" height="200"><path d="M99.468126 0a16.707368 16.707368 0 0 1 6.521263 1.347368c32.768 13.904842 245.652211 108.328421 430.18779 171.385264 88.980211 30.450526 312.697263 106.388211 343.632842 117.813894 33.522526 12.395789 51.2 29.264842 59.338105 50.499369 8.192 21.180632 3.233684 49.367579-8.623158 68.769684-40.097684 74.213053-172.139789 276.048842-172.139789 276.048842h140.018526L612.222653 1024l78.309052-235.789474-131.880421-0.862315 44.247579-147.887158c-23.767579 10.725053-74.913684 25.977263-94.585263 29.318736-5.281684 0.916211-14.874947 2.155789-27.486316 2.15579-34.115368 0-90.273684-9.162105-142.821052-59.122526 0 0-35.893895-34.007579-47.157895-56.158316a14.336 14.336 0 0 1 0.107789-13.850948 15.521684 15.521684 0 0 1 11.210106-7.922526c6.144-1.024 272.707368-36.163368 272.707368-36.163368s-218.112-4.850526-272.707368-15.090527c-66.829474-12.557474-144.653474-97.172211-158.989474-172.463157a14.767158 14.767158 0 0 1 4.042105-13.042527 16.060632 16.060632 0 0 1 11.641263-4.634947l2.694737 0.161684c7.760842 0.916211 408.414316 85.530947 408.414316 85.530947s-379.095579-122.071579-408.414316-146.054736C101.731705 183.026526 71.550653 79.333053 83.407495 12.234105a14.713263 14.713263 0 0 1 5.928421-9.000421C92.192337 1.077895 95.857179 0 99.522021 0" fill="#0091FF" p-id="18552"></path></svg>
        </div>
        <div id="slg-with-ldap" class="slg-vcenter slg-hcenter slg-hidden">
            <svg t="1746528406088" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="18543" width="20" height="20"><path d="M586.752 375.872c81.024 140.608 160 278.208 241.024 418.368h-481.92c80.448-140.16 159.936-278.272 240.896-418.368zM0 735.552C81.472 594.56 160.96 456.832 241.92 316.224c28.864 50.176 56.192 97.408 84.032 145.088 25.792 45.248 51.2 90.432 77.952 135.168 7.488 12.928 8.96 22.4 1.024 35.776-18.368 29.312-34.752 59.584-52.16 89.92-5.504 9.408-10.88 14.4-22.848 13.888-108.8-0.512-217.152-0.512-329.92-0.512zM781.568 316.224c81.472 141.12 160.96 278.72 242.432 419.328h-186.816c-9.408 0-11.904-6.4-15.872-12.864a52076.928 52076.928 0 0 0-129.216-225.088c-3.968-6.976-8.96-12.416-2.944-21.888 30.72-51.648 60.608-104.32 92.416-159.488zM431.232 584.512A29023.552 29023.552 0 0 0 325.44 401.28c-5.44-9.472-4.48-16.384 0.512-24.832 27.776-47.744 55.104-95.36 84.48-146.112 15.872 26.88 30.272 51.712 44.672 76.032 20.352 34.752 40.256 70.08 60.608 104.832 4.992 7.936 7.488 14.4 1.536 24.32-28.8 47.744-55.68 96.448-86.016 149.12z" p-id="18544"></path></svg>
        </div>
    </div>
</div>
`,l=`<svg t="1747914629480" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="21069" id="mx_n_1747914629481" width="24" height="24"><path d="M512 1024C229.239611 1024 0.017919 794.741738 0.017919 511.98135 0.017919 229.22096 229.239611-0.000731 512-0.000731 794.760389-0.000731 1023.982081 229.22096 1023.982081 511.98135 1023.982081 794.741738 794.760389 1024 512 1024ZM512 73.176136C269.649625 73.176136 73.158216 269.667545 73.158216 512.017919 73.158216 754.368294 269.649625 950.859703 512 950.859703 754.350375 950.859703 950.841784 754.368294 950.841784 512.017919 950.841784 269.667545 754.350375 73.176136 512 73.176136ZM464.678227 684.190179 455.828252 693.003585 454.109455 691.284788C449.465046 693.478997 444.345225 694.868663 438.859703 694.868663 431.070262 694.868663 424.231643 691.869911 418.307279 687.737483L417.429596 688.578597 413.041178 684.190179C413.004608 684.153609 413.004608 684.153609 412.968037 684.117039L262.262455 533.411457 314.009216 481.701266 438.859703 606.551754 714.415772 330.959113 766.162533 382.705874 464.751368 684.117039C464.714798 684.153609 464.714798 684.153609 464.678227 684.190179Z" p-id="21070"></path></svg> <span>${t("copy-success")}<span>`;function d(e){return new Promise(t=>{setTimeout(()=>{t(e)},e)})}function c(e){document.getElementById("slg-box-title").innerText=e,document.title=e}function a(e){document.getElementById("slg-warning-container")&&document.getElementById("slg-warning-container").remove();let t=document.createElement("div");t.id="slg-warning-container",document.body.appendChild(t),t.classList.add("slg-hcenter"),t.innerHTML=i,document.getElementById("slg-warning-text").innerText=e,setTimeout(()=>{t.remove()},5e3)}function r(e){let t=document.getElementById("slg-panel");for(let n=0;n<t.children.length;n++)e===t.children[n].id?t.children[n].classList.remove("slg-hidden"):t.children[n].classList.add("slg-hidden")}function g(e){r("slg-msg-container"),document.getElementById("slg-msg-text").innerText=e}function u(e,t){return r("slg-loading-container"),fetch(`/.safeline/auth/api/pending?sl_site_id=${encodeURI(e.site_id)}&sl_check_uuid=${e.check_uuid}&redirect=${encodeURIComponent(window.location.href||"")}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rule_id:t.rule_id,address:location.origin})}).then(e=>{if(200===e.status)return e.json();throw Error("connection-failed")}).then(e=>{e.data?window.location.href=function(e,t){let n=new URL(e),i=new URL(decodeURIComponent(n.searchParams.get("redirect_uri")));return i.searchParams.append("sl_claim_id",t),n.searchParams.set("redirect_uri",i.toString()),n.toString()}(t.url,e.data):window.location.href=t.url})}function h(e,t){1===e.sources.length&&u(e,t)}function p(){r("slg-usergroup-container"),window.slgSourceUserGroup.title?c(window.slgSourceUserGroup.title):c(`${t("auth")} - ${t("usergroup-title")}`)}function m(){r("slg-ldap-container"),window.slgSourceLdap.title?c(window.slgSourceLdap.title):c(`${t("auth")} - ${t("ldap-title")}`)}function w(e){r("slg-loading-container"),window.slgSourceWechat.title?c(window.slgSourceWechat.title):c(`${t("auth")} - ${t("wechat-title")}`);let n=fetch(`/.safeline/auth/api/info/wechat_accounts_platform?rule_id=${window.slgSourceWechat.rule_id}&sl_check_uuid=${e.check_uuid}&sl_site_id=${e.site_id}&app=false`,{method:"GET"}),i=new Promise(e=>{let t=setInterval(()=>{window.WxLogin&&(e(),clearInterval(t))},10)});Promise.all([n,d(500),i]).then(e=>{let[t]=e;if(200===t.status)return t.json();throw Error("connection-failed")}).then(t=>{let n={appid:t.data.app_id,scope:t.data.scope.join(","),redirect_uri:encodeURIComponent(location.origin+"/.safeline/auth/api/callback/wechat_accounts_platform"+`?sl_site_id=${e.site_id}&sl_check_uuid=${e.check_uuid}`),state:t.data.state};new WxLogin({self_redirect:!0,id:"slg-wechat-inject",style:!function(){let e=getComputedStyle(document.getElementById("slg-box")).backgroundColor.match(/\d+/g);if(!e||3!==e.length)return!0;let t=parseInt(e[0]),n=parseInt(e[1]);return .2126*t+.7152*n+.0722*parseInt(e[2])>127.5}()?"white":"black",stylelite:1,fast_login:1,...n}),r("slg-wechat-container")}).catch(e=>{g(t(e.message))})}function v(e){r("slg-loading-container"),window.slgSourceGithub.title?c(window.slgSourceGithub.title):c(`${t("auth")} - ${t("github-title")}`),Promise.all([fetch(`/.safeline/auth/api/info/github?rule_id=${window.slgSourceGithub.rule_id}&sl_site_id=${e.site_id}&sl_check_uuid=${e.check_uuid}`,{method:"GET"}),d(500)]).then(e=>{let[t]=e;if(200===t.status)return t.json();throw Error("connection-failed")}).then(t=>{let n=new URLSearchParams;n.append("redirect_uri",`${encodeURI(location.origin+"/.safeline/auth/api/callback/github")}`),window.slgSourceGithub.url=`${t.data.auth_url}?response_type=${encodeURI(t.data.response_type)}&scope=${encodeURI(t.data.scope.join(" "))}&client_id=${encodeURI(t.data.app_id)}&state=${encodeURI(t.data.state)}&${n.toString()}`,r("slg-github-container"),h(e,window.slgSourceGithub)}).catch(e=>{g(t(e.message))})}function f(e){r("slg-loading-container"),window.slgSourceCas.title?c(window.slgSourceCas.title):c(`${t("auth")} - ${t("cas-title")}`),Promise.all([fetch(`/.safeline/auth/api/info/cas?sl_site_id=${e.site_id}&rule_id=${window.slgSourceCas.rule_id}&sl_check_uuid=${e.check_uuid}&address=${encodeURIComponent(location.origin)}`,{method:"GET"}),d(500)]).then(e=>{let[t]=e;if(200===t.status)return t.json();throw Error("connection-failed")}).then(t=>{window.slgSourceCas.url=t.data.url,r("slg-cas-container"),h(e,window.slgSourceCas)}).catch(e=>{g(t(e.message))})}function _(e){r("slg-loading-container"),window.slgSourceOidc.title?c(window.slgSourceOidc.title):c(`${t("auth")} - ${t("oidc-title")}`),Promise.all([fetch(`/.safeline/auth/api/info/oidc?rule_id=${window.slgSourceOidc.rule_id}&sl_site_id=${e.site_id}&sl_check_uuid=${e.check_uuid}&address=${encodeURIComponent(location.origin)}`,{method:"GET"}),d(500)]).then(e=>{let[t]=e;if(200===t.status)return t.json();throw Error("connection-failed")}).then(t=>{let n=new URLSearchParams;n.append("redirect_uri",`${encodeURI(location.origin+"/.safeline/auth/api/callback/oidc")}`),window.slgSourceOidc.url=`${t.data.auth_url}?response_type=${encodeURI(t.data.response_type)}&scope=${encodeURI(t.data.scope.join(" "))}&client_id=${encodeURI(t.data.app_id)}&state=${encodeURI(t.data.state)}&${n.toString()}`,r("slg-oidc-container"),h(e,window.slgSourceOidc)}).catch(e=>{g(t(e.message))})}function y(e){r("slg-loading-container"),window.slgSourceQiyeWx.title?c(window.slgSourceQiyeWx.title):c(`${t("auth")} - ${t("qy_weixin-title")}`),Promise.all([fetch(`/.safeline/auth/api/info/qy_weixin?rule_id=${window.slgSourceQiyeWx.rule_id}&sl_site_id=${e.site_id}&sl_check_uuid=${e.check_uuid}&app=${function(){let e=navigator.userAgent.toLowerCase();return e.includes("wxwork")||e.includes("micromessenger")&&e.includes("wxwork")}()}`,{method:"GET"}),d(500)]).then(e=>{let[t]=e;if(200===t.status)return t.json();throw Error("connection-failed")}).then(t=>{new URLSearchParams().append("redirect_uri",`${encodeURI(location.origin+"/.safeline/auth/api/callback/qy_weixin")}`),window.slgSourceQiyeWx.url=`${t.data.auth_url}?scope=${encodeURI(t.data.scope.join(" "))}&login_type=CorpApp&response_type=${encodeURI(t.data.response_type)}&appid=${encodeURI(t.data.app_id)}&agentid=${encodeURI(t.data.extra.agentid)}&state=${encodeURI(t.data.state)}&redirect_uri=${encodeURI(location.origin+"/.safeline/auth/api/callback/qy_weixin")}#wechat_redirect`,r("slg-qy_weixin-container"),h(e,window.slgSourceQiyeWx)}).catch(e=>{g(t(e.message))})}function b(e){r("slg-loading-container"),window.slgSourceDingtalk.title?c(window.slgSourceDingtalk.title):c(`${t("auth")} - ${t("dingtalk-title")}`),Promise.all([fetch(`/.safeline/auth/api/info/dingtalk?rule_id=${window.slgSourceDingtalk.rule_id}&sl_site_id=${e.site_id}&sl_check_uuid=${e.check_uuid}`,{method:"GET"}),d(500)]).then(e=>{let[t]=e;if(200===t.status)return t.json();throw Error("connection-failed")}).then(t=>{let n=new URLSearchParams;n.append("redirect_uri",`${encodeURI(location.origin+"/.safeline/auth/api/callback/dingtalk")}`),window.slgSourceDingtalk.url=`${t.data.auth_url}?response_type=${encodeURI(t.data.response_type)}&scope=${encodeURI(t.data.scope.join(" "))}&client_id=${encodeURI(t.data.app_id)}&prompt=consent&state=${encodeURI(t.data.state)}&${n.toString()}`,r("slg-dingtalk-container"),h(e,window.slgSourceDingtalk)}).catch(e=>{g(t(e.message))})}function k(){c(`${t("totp-login")}`),r("slg-totp_code-container");let e=document.querySelectorAll("#slg-totp_code-container input");e.forEach(t=>{t.addEventListener("input",function(t){1===this.value.length&&(this.classList.add("filled"),function(t){let n=parseInt(t.dataset.index)+1;n<e.length?e[n].focus():(t.blur(),s())}(this))}),t.addEventListener("keydown",function(t){"Backspace"===t.key&&""===this.value&&function(t){let n=parseInt(t.dataset.index)-1;n>=0&&e[n].focus()}(this)}),t.addEventListener("paste",function(t){var n;t.preventDefault();let i=t.clipboardData.getData("text").trim();/^\d{6}$/.test(i)&&(n=i,e.forEach((e,t)=>{e.value=n[t],e.classList.add("filled")}),e[e.length-1].blur(),s())})});let i=document.getElementById("slg-totp-btn");function s(){i.innerHTML=t("login-ing")+n,fetch("/.safeline/auth/api/user/auth/totp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:Array.from(e).map(e=>e.value).join(""),timestamp:new Date().getTime()})}).then(e=>{if(200===e.status)return e.json();throw Error("connection-failed")}).then(e=>{[0,2,3,1002].includes(e.code)?location.reload():a(t(e.msg)||t("totp Verification failed"))}).finally(()=>{i.innerHTML=t("login")})}i.addEventListener("click",()=>{s()})}function E(e){console.log(e),fetch(`/.safeline/auth/api/logout?sl_site_id=${e.site_id}&sl_check_uuid=${e.check_uuid}`).then(e=>{if(200===e.status)return e.json();throw Error("connection-failed")}).then(e=>{e.data?location.href=e.data:location.reload()}).catch(e=>{a(t(e.message))})}window.SafeLineAuth=function(e){var i;if(console.log(e),e.user_code&&e.auth_callback){window.location.href=`${e.auth_callback}?code=${e.user_code}&redirect_uri=${encodeURIComponent(location.origin+location.pathname)}`;return}if(e.portal){window.location.href=`${e.portal}?sl_site_id=${encodeURI(e.site_id)}&sl_check_uuid=${encodeURI(e.check_uuid)}&redirect=${encodeURI(location.href)}`;return}if(getComputedStyle(document.documentElement).getPropertyValue("--primary-color")||(document.documentElement.style.setProperty("--primary-color","#39f"),document.documentElement.style.setProperty("--light-primary-color","#39f4"),document.documentElement.style.setProperty("--font-color","#fff"),document.documentElement.style.setProperty("--light-font-color","#ffffffb3"),document.documentElement.style.setProperty("--success-color","#68d8a3"),document.documentElement.style.setProperty("--warning-color","#ed5554"),document.documentElement.style.setProperty("--warning-font-color","#fff"),document.documentElement.style.setProperty("--warning-light-font-color","#ffffffb3")),document.getElementById("slg-box"))document.getElementById("slg-box").innerHTML=o,document.getElementById("slg-box").style.display="none";else{let e=document.createElement("div");e.id="slg-box",e.style.display="none",e.innerHTML=o,document.body.appendChild(e)}if(0===e.action)switch(e.sources.map(i=>{var s;switch(i.type){case"usergroup":document.getElementById("slg-usergroup-username").addEventListener("keydown",e=>{"Enter"===e.key&&document.getElementById("slg-usergroup-password").focus()}),document.getElementById("slg-usergroup-password").addEventListener("keydown",e=>{"Enter"===e.key&&document.getElementById("slg-usergroup-btn").click()}),document.getElementById("slg-usergroup-btn").addEventListener("click",()=>{let i=document.getElementById("slg-usergroup-username"),s=document.getElementById("slg-usergroup-password"),o=document.getElementById("slg-usergroup-btn");if(0===i.length||0===s.length)return void a(t("empty"));i.disabled=!0,s.disabled=!0,o.disabled=!0,o.innerHTML=t("login-ing")+n,Promise.all([fetch(`/.safeline/auth/api/auth?sl_site_id=${encodeURI(e.site_id)}&sl_check_uuid=${encodeURI(e.check_uuid)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rule_id:window.slgSourceUserGroup.rule_id,type:"usergroup",username:i.value,password:s.value})}),d(2e3)]).then(e=>{let[t]=e;if(200===t.status)return t.json();throw Error("connection-failed")}).then(e=>{if(0===e.code)o.innerHTML=t("success")+n,setTimeout(()=>{location.reload()},2e3);else if(1001===e.code)throw Error("ratelimit");else if([1002,1003].includes(e.code))throw Error("bad-password");else if(2===e.code)location.reload();else throw Error(e.msg)}).catch(e=>{a(t(e.message)),i.disabled=!1,s.disabled=!1,o.disabled=!1,o.innerHTML=t("login")})}),document.getElementById("slg-with-usergroup").addEventListener("click",p),document.getElementById("slg-with-usergroup").classList.remove("slg-hidden"),window.slgSourceUserGroup=i;break;case"wechat_accounts_platform":(s=document.createElement("script")).src="//res.wx.qq.com/connect/zh_CN/htmledition/js/wxLogin.js",document.head.appendChild(s),document.getElementById("slg-with-wechat").addEventListener("click",()=>w(e)),document.getElementById("slg-with-wechat").classList.remove("slg-hidden"),window.slgSourceWechat=i;break;case"github":document.getElementById("slg-with-github").addEventListener("click",()=>v(e)),document.getElementById("slg-with-github").classList.remove("slg-hidden"),document.getElementById("slg-github-link").addEventListener("click",()=>{u(e,window.slgSourceGithub)}),window.slgSourceGithub=i;break;case"cas":document.getElementById("slg-with-cas").addEventListener("click",()=>f(e)),document.getElementById("slg-with-cas").classList.remove("slg-hidden"),document.getElementById("slg-cas-link").addEventListener("click",()=>{u(e,window.slgSourceCas)}),window.slgSourceCas=i;break;case"dingtalk":document.getElementById("slg-with-dingtalk").addEventListener("click",()=>b(e)),document.getElementById("slg-with-dingtalk").classList.remove("slg-hidden"),document.getElementById("slg-dingtalk-link").addEventListener("click",()=>{u(e,window.slgSourceDingtalk)}),window.slgSourceDingtalk=i;break;case"qy_weixin":document.getElementById("slg-with-qy_weixin").addEventListener("click",()=>y(e)),document.getElementById("slg-with-qy_weixin").classList.remove("slg-hidden"),document.getElementById("slg-qy_weixin-link").addEventListener("click",()=>{u(e,window.slgSourceQiyeWx)}),window.slgSourceQiyeWx=i;break;case"oidc":document.getElementById("slg-with-oidc").addEventListener("click",()=>_(e)),document.getElementById("slg-with-oidc").classList.remove("slg-hidden"),document.getElementById("slg-oidc-link").addEventListener("click",()=>{u(e,window.slgSourceOidc)}),window.slgSourceOidc=i;break;case"ldap":document.getElementById("slg-ldap-btn").addEventListener("click",()=>{let i=document.getElementById("slg-ldap-username"),s=document.getElementById("slg-ldap-password"),o=document.getElementById("slg-ldap-btn");if(0===i.length||0===s.length)return void a(t("empty"));i.disabled=!0,s.disabled=!0,o.disabled=!0,o.innerHTML=t("login-ing")+n,Promise.all([fetch(`/.safeline/auth/api/auth/ldap?sl_site_id=${encodeURI(e.site_id)}&sl_check_uuid=${encodeURI(e.check_uuid)}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({rule_id:window.slgSourceLdap.rule_id,type:"ldap",username:i.value,password:s.value})}),d(2e3)]).then(e=>{let[t]=e;if(200===t.status)return t.json();throw Error("connection-failed")}).then(e=>{if(0===e.code)o.innerHTML=t("success")+n,setTimeout(()=>{location.reload()},2e3);else if(1001===e.code)throw Error("ratelimit");else if(1003===e.code)throw Error("bad-password");else if(2===e.code)location.reload();else throw Error(e.msg)}).catch(e=>{a(t(e.message)),i.disabled=!1,s.disabled=!1,o.disabled=!1,o.innerHTML=t("login")})}),document.getElementById("slg-with-ldap").addEventListener("click",m),document.getElementById("slg-with-ldap").classList.remove("slg-hidden"),window.slgSourceLdap=i;break;default:g(t(`unknown-type: ${i.type}`))}}),e.sources.length>=2&&document.getElementById("slg-with-more").classList.remove("slg-hidden"),e.sources[0].type){case"usergroup":p();break;case"wechat_accounts_platform":w(e);break;case"github":v(e);break;case"cas":f(e);break;case"dingtalk":b(e);break;case"qy_weixin":y(e);break;case"oidc":_(e);break;case"ldap":m(e);break;default:g(t(`unknown-type: ${e.sources[0].type}`))}else if(2===e.action)setInterval(()=>{fetch(`/.safeline/auth/api/review?sl_site_id=${e.site_id}&sl_check_uuid=${e.check_uuid}`).then(e=>{if(200===e.status)return e.json();throw Error("connection-failed")}).then(e=>{2!==e.code&&(()=>{location.reload()})()})},3e3),r("slg-forbidden-container"),document.getElementById("slg-forbidden-text").innerText=t("need-review"),document.getElementById("slg-forbidden-btn").addEventListener("click",()=>E(e));else if(3===e.action)r("slg-forbidden-container"),document.getElementById("slg-forbidden-text").innerText=t("forbidden"),document.getElementById("slg-forbidden-btn").addEventListener("click",()=>E(e));else if(5===e.action)r("slg-loading-container");else if(6===e.action)if(document.getElementById("slg-totp_qrcode-img").src="data:image/jpeg;base64,"+e.tfa_url,e.raw_tfa_url){r("slg-totp_qrcode-container"),c(`${t("bind-totp")}`),document.getElementById("slg-totp_next-step").addEventListener("click",()=>{k()});let n=new URL(e.raw_tfa_url).searchParams.get("secret"),i=()=>{navigator.clipboard?(navigator.clipboard.writeText(n),document.getElementById("slg-totp_qrcode-copy").innerHTML=l):(function(e){let n=document.createElement("textarea");n.value=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{document.execCommand("copy"),document.getElementById("slg-totp_qrcode-copy").innerHTML=t("copy-success")}catch(e){throw a(t("copy-failed")),e}finally{document.body.removeChild(n)}})(n).catch(e=>{a(t("copy-failed"))}),document.getElementById("slg-totp_qrcode-copy").removeEventListener("click",i)};document.getElementById("slg-totp_qrcode-copy").addEventListener("click",i)}else k();else g(t(e.msg));(i=document.createElement("link")).rel="stylesheet",i.type="text/css",i.href="/.safeline/static/auth.css",i.onload=()=>{document.getElementById("slg-box").style.display=""},document.head.appendChild(i)},window.onerror=(e,t,n,i,s)=>{a(`unknown-error: ${e}`),console.log("message:",e),console.log("source:",t),console.log("position:",n,i),console.log("error:",s)}})();